!function(a,b){var c,d=a.jQuery||a.Cowboy||(a.Cowboy={});d.throttle=c=function(a,c,e,f){function g(){function d(){i=+new Date,e.apply(j,l)}function g(){h=b}var j=this,k=+new Date-i,l=arguments;f&&!h&&d(),h&&clearTimeout(h),f===b&&k>a?d():c!==!0&&(h=setTimeout(f?g:d,f===b?a-k:a))}var h,i=0;return"boolean"!=typeof c&&(f=e,e=c,c=b),d.guid&&(g.guid=e.guid=e.guid||d.guid++),g},d.debounce=function(a,d,e){return e===b?c(a,d,!1):c(a,e,d!==!1)}}(this),$(function(){var a={holder:$(".jwaterfall"),page:"undefined"!=typeof seopage?seopage:1,threshold:1400,colors:["#f5f1e6","#9cb5d4","#aed2e3","#edd196","#c4bab4"],init:function(){var a=this;return a.dataUrl=a.holder.attr("data-url"),a.holder.removeAttr("data-url"),a.holder.children().hasClass("nodata")?($(".xgt-preload").hide(),void $(".jwaterfall").css("opacity",1)):(a.leftCol=a.holder.children().eq(0),a.rightCol=a.holder.children().eq(1),a.width=a.leftCol.width(),a.leftH=a.rightH=0,a.leftCol.html(""),a.rightCol.html(""),a.getData(),$(window).scroll($.throttle(100,function(){a.isScrolledIntoView(".jwf-more")&&(a._isLoadingData||(a.page++,a.getData()))})),void($(".cc-box").length>0&&$(".cc-box").scroll($.throttle(100,function(){a.isScrolledIntoView(".jwf-more")&&(a._isLoadingData||(a.page++,a.getData()))}))))},_isLoadingData:!1,getData:function(){var a=this;this._isLoadingData=!0,$.ajax({url:a.dataUrl,dataType:"json",data:{page:a.page},success:function(b){b.list.length>0?(a._isLoadingData=!1,a.data=b.list,a.urlType=b.url_type,a.detailurl=b.detailurl,a.dataurl=b.dataurl,a.len=a.data.length,a.splitData()):1==a.page}})},_$xgtPreLoad:$(".xgt-preload"),splitData:function(){var a=this;a._leftH=a.leftCol.height(),a._rightH=a.rightCol.height(),$(a.data).each(function(b,c){var d=$("<a></a>");a._leftH>a._rightH?(a.getHtml("right",d,c,b),d.appendTo(a.rightCol)):(a.getHtml("left",d,c,b),d.appendTo(a.leftCol))}),this._$xgtPreLoad.hide(),a.holder.css("opacity",1),a.imgLoad()},imgLoad:function(){var a=this,b={effect:"fadeIn",effectspeed:300,threshold:200,event:"scroll",load:function(){$(this).parent().next().show()},placeholder:""};$(".cc-box").length>0&&(b.container=".cc-box"),a.leftCol.find("img.lazy"+a.page).lazyload(b),a.rightCol.find("img.lazy"+a.page).lazyload(b)},getHtml:function(a,b,c,d){var e,f=this,g=c.width,h=c.height,i=Math.round(h*f.width/g),j=(h/g/2*100).toFixed(8)+"% 0";if(isNaN(i))return void b.remove();"right"==a?f._rightH+=i:f._leftH+=i;var k="c"==f.urlType?c.oldcid:c.oldaid,l=f.detailurl.replace("idval",k);f.dataurl.indexOf("/search")>-1&&(l+="#page="+f.page+"&index="+d+"&max="+f.len),b.attr("href",l),e=$('<img class="lazy'+f.page+'" data-original="'+c.thumb+'" alt="'+c.title+'">'),$('<div class="wf-img-wrap"/>').append(e).css({padding:j,"background-color":f.colors[Math.floor(this.colors.length*Math.random())]}).appendTo(b);var m=c.title,n="";c.num&&(n+='<span class="jwf-num">'+c.num+"å¼ </span>"),n+='<span class="jwf-star">'+c.likenum+"</span>",$("<p>"+n+"</p>").appendTo(b),$("<span>"+m+"</span>").appendTo(b)},isScrolledIntoView:function(a){var b=$(window).scrollTop(),c=b+$(window).height(),d=$(a).offset().top;return d<=c+(this.threshold?this.threshold:0)}};a.init()});
//# sourceMappingURL=jwaterfall.min.js.map